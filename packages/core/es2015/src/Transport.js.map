{"version":3,"file":"Transport.js","sourceRoot":"","sources":["../../src/Transport.ts"],"names":[],"mappings":";;AAIA;CAMC;AAND,gCAMC;AAMD,mBAA0B,OAAyB;IACjD,MAAM,CAAC,CAAsC,KAAQ,EAAK,EAAE;QAC1D,MAAM,MAAC,KAAM,SAAQ,KAAK;gBAAnB;;oBAEL,SAAI,GAAG,OAAO,CAAC,IAAI,CAAC;gBAKtB,CAAC;gBAHC,MAAM,CAAC,gBAAgB,CAAC,QAAkB;oBACxC,MAAM,CAAC,IAAI,IAAI,CAAC,GAAG,QAAQ,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC,CAAA;gBAC1C,CAAC;aACF;YANQ,OAAI,GAAG,OAAO,CAAC,IAAK;eAM5B;;IACH,CAAC,CAAC;AACJ,CAAC;AAXD,8BAWC","sourcesContent":["import { CommandMessage } from './CommandMessage';\nimport { options } from 'joi';\nimport { Injector } from './Injector';\n\nexport abstract class ITransport {\n  static _CreateTransport: (injector: Injector) => ITransport;\n  static Settings: (settings: any) => { _CreateTransport: (injector: Injector) => ITransport };\n  abstract start(): Promise<void>;\n  onCommand?(handler: (data: CommandMessage) => Promise<void>): void;\n  sendCommand?(data: CommandMessage): Promise<void>;\n}\n\nexport interface TransportOptions {\n  name: string;\n}\n\nexport function Transport(options: TransportOptions) {\n  return <T extends {new(...args: any[]): {}}>(Class: T): T => {\n    return class extends Class {\n      static Name = options.name;\n      name = options.name;\n\n      static _CreateTransport(injector: Injector) {\n        return new this(...injector.args(Class))\n      }\n    }\n  };\n}\n"]}