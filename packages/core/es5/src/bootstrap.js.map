{"version":3,"file":"bootstrap.js","sourceRoot":"","sources":["../../src/bootstrap.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,+BAA0B;AAC1B,uCAAsC;AACtC,mDAAkD;AAClD,mCAAkC;AAClC,kCAAoC;AAEpC;;;;;;;GAOG;AACH,mBAAmC,IAGlC;;;;;;oBACC,OAAO,CAAC,GAAG,CAAC,QAAQ,GAAG,OAAO,CAAC,GAAG,CAAC,QAAQ,IAAI,aAAa,CAAC;oBACvD,QAAQ,GAAG,IAAI,mBAAQ,EAAE,CAAC;oBAChC,QAAQ,CAAC,GAAG,CAAC,EAAC,OAAO,EAAE,eAAM,EAAE,WAAW,EAAE,IAAI,+BAAc,EAAE,EAAC,CAAC,CAAC;oBAC7D,MAAM,GAAG,QAAQ,CAAC,GAAG,CAAS,eAAM,CAAC,CAAC;oBAC5C,MAAM,CAAC,GAAG,CAAC,eAAK,CAAC,KAAK,CAAC,MAAM,CAAC,CAAC,CAAC;oBAChC,MAAM,CAAC,IAAI,CAAC,yBAAuB,KAAK,CAAC,GAAG,CAAC,QAAQ,CAAG,CAAC,CAAC;oBAC1D,MAAM,CAAC,IAAI,CAAC,cAAY,OAAO,CAAC,iBAAiB,CAAC,CAAC,OAAS,CAAC,CAAC;oBAC9D,MAAM,CAAC,IAAI,CAAC,kBAAgB,OAAO,CAAC,GAAG,CAAC,QAAQ,SAAI,KAAK,CAAC,GAAG,CAAC,MAAM,CAAG,CAAC,CAAC;yBACrE,IAAI,CAAC,YAAY,EAAjB,wBAAiB;oBACnB,MAAM,CAAC,IAAI,CAAC,WAAS,IAAI,CAAC,IAAM,CAAC,CAAC;oBAC5B,IAAI,GAAG,IAAI,CAAC,YAAY,CAAC,QAAQ,CAAC,CAAC;oBACzC,MAAM,CAAC,IAAI,CAAC,0BAAwB,KAAK,CAAC,GAAG,CAAC,QAAQ,CAAG,CAAC,CAAC;oBAC3D,qBAAM,IAAI,CAAC,MAAM,EAAE,EAAA;;oBAAnB,SAAmB,CAAC;;;oBAEpB,MAAM,CAAC,KAAK,CAAC,+DAA+D,CAAC,CAAC;oBAC9E,MAAM,IAAI,KAAK,CAAC,iBAAiB,CAAC,CAAC;;;;;CAEtC;AArBD,8BAqBC;AAED;IAAA;IAIA,CAAC;IAAD,oBAAC;AAAD,CAAC,AAJD,IAIC;AAJqB,sCAAa;AAMnC,IAAM,MAAM,GAAG,2gEASd,CAAC","sourcesContent":["import chalk from 'chalk';\nimport { Injector } from './Injector';\nimport { InternalLogger } from './InternalLogger';\nimport { Logger } from './Logger';\nimport * as emoji from 'node-emoji';\n\n/**\n * Bootstraps a CommandManager, ReadManager, or Saga.\n *\n * @since 1.0.0\n *\n * @param type The type to instantiate\n * @returns {Promise<void>} A promise that resolves once the app is started\n */\nexport async function bootstrap<T>(type: {\n  Type: string;\n  _Instantiate: (injector: Injector) => Bootstrapable\n}): Promise<void> {\n  process.env.NODE_ENV = process.env.NODE_ENV || 'development';\n  const injector = new Injector();\n  injector.set({provide: Logger, useConstant: new InternalLogger()});\n  const logger = injector.get<Logger>(Logger);\n  logger.raw(chalk.green(banner));\n  logger.info(`Launching Eventific ${emoji.get('rocket')}`);\n  logger.info(`Version: ${require('../package.json').version}`);\n  logger.info(`Environment: ${process.env.NODE_ENV} ${emoji.get('eyes')}`);\n  if (type._Instantiate) {\n    logger.info(`Type: ${type.Type}`);\n    const inst = type._Instantiate(injector);\n    logger.info(`Starting application ${emoji.get('dancer')}`);\n    await inst._start();\n  } else {\n    logger.error('The provided type does not seem to be a bootstrap able module');\n    throw new Error('Failed to start');\n  }\n}\n\nexport abstract class Bootstrapable {\n  static Type: string;\n  _Instantiate: (injector: Injector) => Bootstrapable;\n  abstract _start(): Promise<void>;\n}\n\nconst banner = `\n\n  ███████╗██╗   ██╗███████╗███╗   ██╗████████╗██╗███████╗██╗ ██████╗\n  ██╔════╝██║   ██║██╔════╝████╗  ██║╚══██╔══╝██║██╔════╝██║██╔════╝\n  █████╗  ██║   ██║█████╗  ██╔██╗ ██║   ██║   ██║█████╗  ██║██║     \n  ██╔══╝  ╚██╗ ██╔╝██╔══╝  ██║╚██╗██║   ██║   ██║██╔══╝  ██║██║     \n  ███████╗ ╚████╔╝ ███████╗██║ ╚████║   ██║   ██║██║     ██║╚██████╗\n  ╚══════╝  ╚═══╝  ╚══════╝╚═╝  ╚═══╝   ╚═╝   ╚═╝╚═╝     ╚═╝ ╚═════╝\n                                                                  \n`;\n"]}